<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0.学习目标 | 试剑江湖</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/HomeWeb/favicon.ico">
    <meta name="description" content="技术笔记记录首页">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/HomeWeb/assets/css/0.styles.8c081518.css" as="style"><link rel="preload" href="/HomeWeb/assets/js/app.f00e1531.js" as="script"><link rel="preload" href="/HomeWeb/assets/js/3.3632763b.js" as="script"><link rel="preload" href="/HomeWeb/assets/js/22.620201c8.js" as="script"><link rel="prefetch" href="/HomeWeb/assets/js/1.419632b2.js"><link rel="prefetch" href="/HomeWeb/assets/js/10.05b53e7b.js"><link rel="prefetch" href="/HomeWeb/assets/js/11.c01fb817.js"><link rel="prefetch" href="/HomeWeb/assets/js/12.d4de9a5a.js"><link rel="prefetch" href="/HomeWeb/assets/js/13.5c6fb8b2.js"><link rel="prefetch" href="/HomeWeb/assets/js/14.7d4b4759.js"><link rel="prefetch" href="/HomeWeb/assets/js/15.afac0122.js"><link rel="prefetch" href="/HomeWeb/assets/js/16.c9896eec.js"><link rel="prefetch" href="/HomeWeb/assets/js/17.3ab5b38e.js"><link rel="prefetch" href="/HomeWeb/assets/js/18.d7dac9d8.js"><link rel="prefetch" href="/HomeWeb/assets/js/19.a670e275.js"><link rel="prefetch" href="/HomeWeb/assets/js/20.51fe05c4.js"><link rel="prefetch" href="/HomeWeb/assets/js/21.afef3902.js"><link rel="prefetch" href="/HomeWeb/assets/js/23.6b058045.js"><link rel="prefetch" href="/HomeWeb/assets/js/24.2d6fe4ce.js"><link rel="prefetch" href="/HomeWeb/assets/js/25.cb7e1571.js"><link rel="prefetch" href="/HomeWeb/assets/js/26.2aa9302e.js"><link rel="prefetch" href="/HomeWeb/assets/js/27.9352d043.js"><link rel="prefetch" href="/HomeWeb/assets/js/28.42d8c031.js"><link rel="prefetch" href="/HomeWeb/assets/js/29.f8bd9b3a.js"><link rel="prefetch" href="/HomeWeb/assets/js/30.fdcdd125.js"><link rel="prefetch" href="/HomeWeb/assets/js/31.7ff3b238.js"><link rel="prefetch" href="/HomeWeb/assets/js/32.4a24971a.js"><link rel="prefetch" href="/HomeWeb/assets/js/33.e3e5225d.js"><link rel="prefetch" href="/HomeWeb/assets/js/34.96f1fe8c.js"><link rel="prefetch" href="/HomeWeb/assets/js/35.008b89a5.js"><link rel="prefetch" href="/HomeWeb/assets/js/36.22474abc.js"><link rel="prefetch" href="/HomeWeb/assets/js/37.c681d3b5.js"><link rel="prefetch" href="/HomeWeb/assets/js/38.0c1aad2d.js"><link rel="prefetch" href="/HomeWeb/assets/js/39.ea431ca6.js"><link rel="prefetch" href="/HomeWeb/assets/js/4.ec731a74.js"><link rel="prefetch" href="/HomeWeb/assets/js/5.55497912.js"><link rel="prefetch" href="/HomeWeb/assets/js/6.3915c298.js"><link rel="prefetch" href="/HomeWeb/assets/js/7.92cca28e.js"><link rel="prefetch" href="/HomeWeb/assets/js/8.36849db6.js"><link rel="prefetch" href="/HomeWeb/assets/js/9.94101de0.js">
    <link rel="stylesheet" href="/HomeWeb/assets/css/0.styles.8c081518.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/HomeWeb/" class="home-link router-link-active"><!----> <span class="site-name">试剑江湖</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/HomeWeb/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端技术" class="dropdown-title"><span class="title">后端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端技术" class="mobile-dropdown-title"><span class="title">后端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://howtodoinjava.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java核心笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          JVM虚拟机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/JVM虚拟机/垃圾回收算法.html" class="nav-link">
  垃圾回收算法
</a></li></ul></li><li class="dropdown-item"><h4>
          Java并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/SQL优化笔记.html" class="nav-link">
  SQL优化笔记
</a></li><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/SpringBoot/springboot基础入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/微服务技术/" class="nav-link">
  微服务技术
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/Linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://dubbo.apache.org/zh-cn/docs/user/quick-start.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RPC远程服务Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://dubbo.apache.org/zh-cn/docs/user/references/registry/zookeeper.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  注册中心zookeeper 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息队列RabbitMQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搜索引擎ES
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://redis.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  分布式缓存Redis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.mycat.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NoSql数据库mycat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          测试与部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.docker.com/get-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  容器化技术Docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/jenkinsci/jenkins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动化集成Jekins
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术" class="dropdown-title"><span class="title">前端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术" class="mobile-dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VUE
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Axios
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/css/css-link.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jquery123.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jquery
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线工具" class="dropdown-title"><span class="title">在线工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="在线工具" class="mobile-dropdown-title"><span class="title">在线工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSON 编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cli.im" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.toyaml.com/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Properties&lt;-&gt;Yml
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MD表格生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CRON表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://jwt.io/#debugger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JWT 解码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.webjars.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  数据加解密
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.uupoop.com/zp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片编辑
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.fly63.com/tool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          开源镜像
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bootcdn.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里OPSX
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mirror.azure.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Azure
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Hub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bootcdn.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boot CDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/developer/devdocs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯开发手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目案例" class="dropdown-title"><span class="title">项目案例</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目案例" class="mobile-dropdown-title"><span class="title">项目案例</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/projects/乐优商城介绍.html" class="nav-link">
  
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/projects/乐优商城介绍.html" class="nav-link">
  （1）乐优商城项目
</a></li></ul></div></div><div class="nav-item"><a href="/HomeWeb/notes/link/" class="nav-link">
  友链
</a></div> <a href="https://github.com/iswxw/HomeWeb" target="_blank" rel="noopener noreferrer" class="repo-link">
    HomeWeb
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/HomeWeb/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端技术" class="dropdown-title"><span class="title">后端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端技术" class="mobile-dropdown-title"><span class="title">后端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://howtodoinjava.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java核心笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          JVM虚拟机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/JVM虚拟机/垃圾回收算法.html" class="nav-link">
  垃圾回收算法
</a></li></ul></li><li class="dropdown-item"><h4>
          Java并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/SQL优化笔记.html" class="nav-link">
  SQL优化笔记
</a></li><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/HomeWeb/notes/Java/数据库技术/MySql基础.html" class="nav-link">
  MySQL基础
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/SpringBoot/springboot基础入门.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/微服务技术/" class="nav-link">
  微服务技术
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/Java/Linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://dubbo.apache.org/zh-cn/docs/user/quick-start.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RPC远程服务Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://dubbo.apache.org/zh-cn/docs/user/references/registry/zookeeper.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  注册中心zookeeper 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  消息队列RabbitMQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搜索引擎ES
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://redis.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  分布式缓存Redis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.mycat.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NoSql数据库mycat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          测试与部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.docker.com/get-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  容器化技术Docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/jenkinsci/jenkins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动化集成Jekins
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术" class="dropdown-title"><span class="title">前端技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术" class="mobile-dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VUE
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Axios
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/css/css-link.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jquery123.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jquery
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="在线工具" class="dropdown-title"><span class="title">在线工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="在线工具" class="mobile-dropdown-title"><span class="title">在线工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JSON 编辑器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cli.im" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.toyaml.com/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Properties&lt;-&gt;Yml
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MD表格生成器
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CRON表达式
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://jwt.io/#debugger" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JWT 解码
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.webjars.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  数据加解密
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.uupoop.com/zp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片编辑
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.fly63.com/tool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          开源镜像
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bootcdn.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里OPSX
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mirror.azure.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Azure
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker Hub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bootcdn.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boot CDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/developer/devdocs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯开发手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目案例" class="dropdown-title"><span class="title">项目案例</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目案例" class="mobile-dropdown-title"><span class="title">项目案例</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/projects/乐优商城介绍.html" class="nav-link">
  
</a></li><li class="dropdown-item"><!----> <a href="/HomeWeb/notes/projects/乐优商城介绍.html" class="nav-link">
  （1）乐优商城项目
</a></li></ul></div></div><div class="nav-item"><a href="/HomeWeb/notes/link/" class="nav-link">
  友链
</a></div> <a href="https://github.com/iswxw/HomeWeb" target="_blank" rel="noopener noreferrer" class="repo-link">
    HomeWeb
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/HomeWeb/notes/guide/" class="sidebar-link">首页导读</a></li><li><a href="/HomeWeb/notes/blog/Java实习总结.html" class="sidebar-link">1，Java实习总结</a></li><li><a href="/HomeWeb/notes/Java/SpringBoot/springboot基础入门.html" class="sidebar-link">2，SpringBoot基础</a></li><li><a href="/HomeWeb/notes/Java/SpringCloud/cloud1/SpringCloud.html" class="sidebar-link">3，SpringCloud入门</a></li><li><a href="/HomeWeb/notes/Java/SpringCloud/cloud2/SpringCloud2.html" class="sidebar-link">4，SpringCloud基础</a></li><li><a href="/HomeWeb/notes/Java/数据库技术/SQL优化笔记.html" class="sidebar-link">5，SQL优化笔记</a></li><li><a href="/HomeWeb/notes/projects/乐优商城介绍.html" class="sidebar-link">6，购物商城项目</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>5，商城项目精华</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/HomeWeb/notes/Java/项目搭建及ES6语法/day04-乐优商城项目搭建.html" class="sidebar-link">(1) 项目搭建及ES6语法</a></li><li><a href="/HomeWeb/notes/Java/vue入门/day05-vue入门.html" class="sidebar-link">(2) Vue 入门</a></li><li><a href="/HomeWeb/notes/Java/商品分类/day06.html" class="sidebar-link">(3) 商品分类</a></li><li><a href="/HomeWeb/notes/Java/品牌查询/day07.html" class="sidebar-link">(4) 品牌查询</a></li><li><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html" class="active sidebar-link">(5) 品牌新增及fastDFS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-1-页面实现" class="sidebar-link">1.1.页面实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-1-1-重置表单" class="sidebar-link">1.1.1.重置表单</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-1-2-表单校验" class="sidebar-link">1.1.2.表单校验</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-1-3-表单提交" class="sidebar-link">1.1.3.表单提交</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-2-后台实现新增" class="sidebar-link">1.2.后台实现新增</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-2-1-controller" class="sidebar-link">1.2.1.controller</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-2-2-service" class="sidebar-link">1.2.2.Service</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-2-3-mapper" class="sidebar-link">1.2.3.Mapper</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-2-4-测试" class="sidebar-link">1.2.4.测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-3-解决400" class="sidebar-link">1.3.解决400</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-3-1-原因分析" class="sidebar-link">1.3.1.原因分析</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-3-2-qs工具" class="sidebar-link">1.3.2.QS工具</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-3-3-解决问题" class="sidebar-link">1.3.3.解决问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_1-4-新增完成后关闭窗口" class="sidebar-link">1.4.新增完成后关闭窗口</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-1-搭建项目" class="sidebar-link">2.1.搭建项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-1-1-创建module" class="sidebar-link">2.1.1.创建module</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-1-2-依赖" class="sidebar-link">2.1.2.依赖</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-1-3-编写配置" class="sidebar-link">2.1.3.编写配置</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-1-4-引导类" class="sidebar-link">2.1.4.引导类</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-2-编写上传功能" class="sidebar-link">2.2.编写上传功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-2-1-controller" class="sidebar-link">2.2.1.controller</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-2-2-service" class="sidebar-link">2.2.2.service</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-2-3-测试上传" class="sidebar-link">2.2.3.测试上传</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-3-绕过网关" class="sidebar-link">2.3.绕过网关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-3-1-zuul的路由过滤" class="sidebar-link">2.3.1.Zuul的路由过滤</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-3-2-nginx的rewrite指令" class="sidebar-link">2.3.2.Nginx的rewrite指令</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-4-跨域问题" class="sidebar-link">2.4.跨域问题</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_2-5-文件上传的缺陷" class="sidebar-link">2.5.文件上传的缺陷</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-1-什么是分布式文件系统" class="sidebar-link">3.1.什么是分布式文件系统</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-2-什么是fastdfs" class="sidebar-link">3.2.什么是FastDFS</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-3-fastdfs的架构" class="sidebar-link">3.3.FastDFS的架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-3-1-架构图" class="sidebar-link">3.3.1.架构图</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-3-2-上传和下载流程" class="sidebar-link">3.3.2.上传和下载流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-4-安装和使用" class="sidebar-link">3.4.安装和使用</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-java客户端" class="sidebar-link">3.5.java客户端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-1-引入依赖" class="sidebar-link">3.5.1.引入依赖</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-2-引入配置类" class="sidebar-link">3.5.2.引入配置类</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-3-编写fastdfs属性" class="sidebar-link">3.5.3.编写FastDFS属性</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-4-配置hosts" class="sidebar-link">3.5.4.配置hosts</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-5-测试" class="sidebar-link">3.5.5.测试</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-6-改造上传逻辑" class="sidebar-link">3.5.6.改造上传逻辑</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-5-7-测试" class="sidebar-link">3.5.7.测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_3-6-页面测试上传" class="sidebar-link">3.6.页面测试上传</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-1-点击编辑出现弹窗" class="sidebar-link">4.1.点击编辑出现弹窗</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-2-回显数据" class="sidebar-link">4.2.回显数据</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-3-商品分类回显" class="sidebar-link">4.3.商品分类回显</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-3-1-后台提供接口" class="sidebar-link">4.3.1.后台提供接口</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-3-2-前台查询分类并渲染" class="sidebar-link">4.3.2.前台查询分类并渲染</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-3-3-新增窗口数据干扰" class="sidebar-link">4.3.3.新增窗口数据干扰</a></li><li class="sidebar-sub-header"><a href="/HomeWeb/notes/Java/品牌新增及fastDFS/day08-品牌管理.html#_4-3-4-提交表单时判断是新增还是修改" class="sidebar-link">4.3.4.提交表单时判断是新增还是修改</a></li></ul></li></ul></li><li><a href="/HomeWeb/notes/Java/规格参数/day09-商品规格管理.html" class="sidebar-link">(6) 规格参数</a></li><li><a href="/HomeWeb/notes/Java/商品管理/day10-商品管理.html" class="sidebar-link">(7) 商品管理</a></li><li><a href="/HomeWeb/notes/Java/elasticsearch/day11-elasticsearch.html" class="sidebar-link">(8) elasticsearch</a></li><li><a href="/HomeWeb/notes/Java/基本搜索/day12.基本搜索.html" class="sidebar-link">(9) 基本搜索</a></li><li><a href="/HomeWeb/notes/Java/搜索过滤/day13-搜索过滤.html" class="sidebar-link">(10) 搜索过滤</a></li><li><a href="/HomeWeb/notes/Java/thymeleaf及静态化/day14.商品详情及静态化.html" class="sidebar-link">(11) thymeleaf及静态化</a></li><li><a href="/HomeWeb/notes/Java/rabbitMQ/day15-rabbitmq及数据同步.html" class="sidebar-link">(12) rabbitMQ</a></li><li><a href="/HomeWeb/notes/Java/用户注册/day16-用户注册.html" class="sidebar-link">(13) 用户注册</a></li><li><a href="/HomeWeb/notes/Java/授权中心/day17-授权中心.html" class="sidebar-link">(14) 授权中心</a></li><li><a href="/HomeWeb/notes/Java/购物车/day18-购物车.html" class="sidebar-link">(15) 购物车</a></li><li><a href="/HomeWeb/notes/Java/下单/day19-下单.html" class="sidebar-link">(16) 下单</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_0-学习目标"><a href="#_0-学习目标" class="header-anchor">#</a> 0.学习目标</h1> <ul><li>独立实现品牌新增</li> <li>实现图片上传</li> <li>了解FastDFS的安装</li> <li>使用FastDFS客户端实现上传</li></ul> <h1 id="_1-品牌的新增"><a href="#_1-品牌的新增" class="header-anchor">#</a> 1.品牌的新增</h1> <p>昨天我们完成了品牌的查询，接下来就是新增功能。点击新增品牌按钮</p> <p><img src="assets/1545222288968.png" alt="1545222288968"></p> <p>Brand.vue页面有一个提交按钮：</p> <p><img src="assets/1545222410267.png" alt="1545222410267"></p> <p>点击触发addBrand方法：</p> <p><img src="assets/1545222464105.png" alt="1545222464105"></p> <p>把数据模型之的show置为true，而页面中有一个弹窗与show绑定：</p> <p><img src="assets/1545222628405.png" alt="1545222628405"></p> <p>弹窗中有一个表单子组件，并且是一个局部子组件，有页面可以找到该组件：</p> <p><img src="assets/1545222756536.png" alt="1545222756536"></p> <h2 id="_1-1-页面实现"><a href="#_1-1-页面实现" class="header-anchor">#</a> 1.1.页面实现</h2> <h3 id="_1-1-1-重置表单"><a href="#_1-1-1-重置表单" class="header-anchor">#</a> 1.1.1.重置表单</h3> <p>重置表单相对简单，因为v-form组件已经提供了reset方法，用来清空表单数据。只要我们拿到表单组件对象，就可以调用方法了。</p> <p>我们可以通过<code>$refs</code>内置对象来获取表单组件。</p> <p>首先，在表单上定义<code>ref</code>属性：</p> <p><img src="assets/1530674011487.png" alt="1530674011487"></p> <p>然后，在页面查看<code>this.$refs</code>属性：</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 重置表单</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre></div><p>查看如下：</p> <p><img src="assets/1530674402709.png" alt="1530674402709"></p> <p>看到<code>this.$refs</code>中只有一个属性，就是<code>myBrandForm</code></p> <p>我们在clear中来获取表单对象并调用reset方法：</p> <p><img src="assets/1545221936052.png" alt="1545221936052"></p> <p>要注意的是，这里我们还手动把this.categories清空了，因为我写的级联选择组件并没有跟表单结合起来。需要手动清空。</p> <h3 id="_1-1-2-表单校验"><a href="#_1-1-2-表单校验" class="header-anchor">#</a> 1.1.2.表单校验</h3> <h4 id="_1-1-2-1-校验规则"><a href="#_1-1-2-1-校验规则" class="header-anchor">#</a> 1.1.2.1.校验规则</h4> <p>Vuetify的表单校验，是通过rules属性来指定的：</p> <p><img src="assets/1530687657711.png" alt="1530687657711"></p> <p>校验规则的写法：</p> <p><img src="assets/1530688192442.png" alt="1530688192442"></p> <p>说明：</p> <ul><li>规则是一个数组</li> <li>数组中的元素是一个函数，该函数接收表单项的值作为参数，函数返回值两种情况：
<ul><li>返回true，代表成功，</li> <li>返回错误提示信息，代表失败</li></ul></li></ul> <h4 id="_1-1-2-2-编写校验"><a href="#_1-1-2-2-编写校验" class="header-anchor">#</a> 1.1.2.2.编写校验</h4> <p>我们有四个字段：</p> <ul><li>name：做非空校验和长度校验，长度必须大于1</li> <li>letter：首字母，校验长度为1，非空。</li> <li>image：图片，不做校验，图片可以为空</li> <li>categories：非空校验，自定义组件已经帮我们完成，不用写了</li></ul> <p>首先，我们定义规则：</p> <p><img src="assets/1545221873038.png" alt="1545221873038"></p> <p>然后，在页面标签中指定：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-text-field</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入品牌名称<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>例如：oppo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[rules.required, rules.nameLength]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-text-field</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-text-field</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand.letter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入品牌首字母<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>例如：O<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[rules.letter]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-text-field</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>效果：</p> <p><img src="assets/1530690428352.png" alt="1530690428352"></p> <h3 id="_1-1-3-表单提交"><a href="#_1-1-3-表单提交" class="header-anchor">#</a> 1.1.3.表单提交</h3> <p>在submit方法中添加表单提交的逻辑：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 表单校验</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myBrandForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 定义一个请求参数对象，通过解构表达式来获取brand中的属性{categories letter name image}</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>categories<span class="token punctuation">,</span> letter<span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token punctuation">;</span> <span class="token comment">// params:{name, image, cids, letter}</span>
        <span class="token comment">// 数据库中只要保存分类的id即可，因此我们对categories的值进行处理,只保留id，并转为字符串</span>
        params<span class="token punctuation">.</span>cids <span class="token operator">=</span> categories<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将字母都处理为大写</span>
        params<span class="token punctuation">.</span>letter <span class="token operator">=</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将数据提交到后台</span>
        <span class="token comment">// this.$http.post('/item/brand', this.$qs.stringify(params))</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">?</span> <span class="token string">'put'</span> <span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/item/brand'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> params
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 关闭窗口</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;保存成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;保存失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>通过<code>this.$refs.myBrandForm</code>选中表单，然后调用表单的<code>validate</code>方法，进行表单校验。返回boolean值，true代表校验通过</li> <li>通过解构表达式来获取brand中的值，categories需要处理，单独获取。其它的存入params对象中</li> <li>品牌和商品分类的中间表只保存两者的id，而brand.categories中保存的是对象数组，里面有id和name属性，因此这里通过数组的map功能转为id数组，然后通过join方法拼接为字符串</li> <li>发起请求</li> <li>弹窗提示成功还是失败，这里用到的是我们的自定义组件功能message组件：</li></ol> <p><img src="assets/1526140298249.png" alt="1526140298249"></p> <p>这个插件把<code>$message</code>对象绑定到了Vue的原型上，因此我们可以通过<code>this.$message</code>来直接调用。</p> <p>包含以下常用方法：</p> <ul><li>info、error、success、warning等，弹出一个带有提示信息的窗口，色调与为普通（灰）、错误（红色）、成功（绿色）和警告（黄色）。使用方法：this.$message.info(&quot;msg&quot;)</li> <li>confirm：确认框。用法：<code>this.$message.confirm(&quot;确认框的提示信息&quot;)</code>，返回一个Promise。</li></ul> <h2 id="_1-2-后台实现新增"><a href="#_1-2-后台实现新增" class="header-anchor">#</a> 1.2.后台实现新增</h2> <h3 id="_1-2-1-controller"><a href="#_1-2-1-controller" class="header-anchor">#</a> 1.2.1.controller</h3> <p>还是一样，先分析四个内容：</p> <ul><li>请求方式：POST</li> <li>请求路径：/brand</li> <li>请求参数：brand对象，外加商品分类的id数组cids</li> <li>返回值：无，只需要响应状态码</li></ul> <p>代码：</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">/**
     * 新增品牌
     * @param brand
     * @param cids
     */</span>
    <span class="token annotation punctuation">@PostMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveBrand</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;cids&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cids<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brandService<span class="token punctuation">.</span><span class="token function">saveBrand</span><span class="token punctuation">(</span>brand<span class="token punctuation">,</span> cids<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">CREATED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-2-service"><a href="#_1-2-2-service" class="header-anchor">#</a> 1.2.2.Service</h3> <p>这里要注意，我们不仅要新增品牌，还要维护品牌和商品分类的中间表。</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">/**
     * 新增品牌
     *
     * @param brand
     * @param cids
     */</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveBrand</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> cids<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 先新增brand</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brandMapper<span class="token punctuation">.</span><span class="token function">insertSelective</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 在新增中间表</span>
        cids<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cid <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>brandMapper<span class="token punctuation">.</span><span class="token function">insertCategoryAndBrand</span><span class="token punctuation">(</span>cid<span class="token punctuation">,</span> brand<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>这里调用了brandMapper中的一个自定义方法，来实现中间表的数据新增</p> <h3 id="_1-2-3-mapper"><a href="#_1-2-3-mapper" class="header-anchor">#</a> 1.2.3.Mapper</h3> <p>通用Mapper只能处理单表，也就是Brand的数据，因此我们手动编写一个方法及sql，实现中间表的新增：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandMapper</span> <span class="token keyword">extends</span> <span class="token class-name">Mapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 新增商品分类和品牌中间表数据
     * @param cid 商品分类id
     * @param bid 品牌id
     * @return
     */</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO tb_category_brand(category_id, brand_id) VALUES (#{cid},#{bid})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">insertBrandAndCategory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;cid&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> cid<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;bid&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> bid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-4-测试"><a href="#_1-2-4-测试" class="header-anchor">#</a> 1.2.4.测试</h3> <p><img src="assets/1532827997361.png" alt="1532827997361"></p> <p>400：请求参数不合法</p> <h2 id="_1-3-解决400"><a href="#_1-3-解决400" class="header-anchor">#</a> 1.3.解决400</h2> <h3 id="_1-3-1-原因分析"><a href="#_1-3-1-原因分析" class="header-anchor">#</a> 1.3.1.原因分析</h3> <p>我们填写表单并提交，发现报错了。查看控制台的请求详情：</p> <p><img src="assets/1530696121642.png" alt="1530696121642"></p> <p>发现请求的数据格式是JSON格式。</p> <blockquote><p>原因分析：</p></blockquote> <p>axios处理请求体的原则会根据请求数据的格式来定：</p> <ul><li><p>如果请求体是对象：会转为json发送</p></li> <li><p>如果请求体是String：会作为普通表单请求发送，但需要我们自己保证String的格式是键值对。</p> <p>如：name=jack&amp;age=12</p></li></ul> <h3 id="_1-3-2-qs工具"><a href="#_1-3-2-qs工具" class="header-anchor">#</a> 1.3.2.QS工具</h3> <p>QS是一个第三方库，我们可以用<code>npm install qs --save</code>来安装。不过我们在项目中已经集成了，大家无需安装：</p> <p><img src="assets/1530696509189.png" alt="1530696509189"></p> <p>这个工具的名字：QS，即Query String，请求参数字符串。</p> <p>什么是请求参数字符串？例如： name=jack&amp;age=21</p> <p>QS工具可以便捷的实现 JS的Object与QueryString的转换。</p> <p>在我们的项目中，将QS注入到了Vue的原型对象中，我们可以通过<code>this.$qs</code>来获取这个工具：</p> <p><img src="assets/1539821449329.png" alt="1539821449329"></p> <p>我们将<code>this.$qs</code>对象打印到控制台：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>发现其中有3个方法：</p> <p><img src="assets/1532850873556.png" alt="1532850873556"></p> <p>这里我们要使用的方法是stringify，它可以把Object转为QueryString。</p> <p>测试一下，使用浏览器工具，把qs对象保存为一个临时变量temp1，然后调用stringify方法：</p> <p><img src="assets/qs-2.gif" alt="1526182230872"></p> <p>成功将person对象变成了 name=zhangsan&amp;age=30的字符串了</p> <h3 id="_1-3-3-解决问题"><a href="#_1-3-3-解决问题" class="header-anchor">#</a> 1.3.3.解决问题</h3> <p>修改页面，对参数处理后发送：</p> <p><img src="assets/1545223244002.png" alt="1545223244002"></p> <p>然后再次发起请求，发现请求成功：</p> <p><img src="assets/1530698685973.png" alt="1530698685973"></p> <h2 id="_1-4-新增完成后关闭窗口"><a href="#_1-4-新增完成后关闭窗口" class="header-anchor">#</a> 1.4.新增完成后关闭窗口</h2> <p>我们发现有一个问题：新增不管成功还是失败，窗口都一致在这里，不会关闭。</p> <p>这样很不友好，我们希望如果新增失败，窗口保持；但是新增成功，窗口关闭才对。</p> <p>因此，我们需要<strong>在新增的ajax请求完成以后，关闭窗口</strong></p> <p>但问题在于，控制窗口是否显示的标记在父组件：MyBrand.vue中。子组件如何才能操作父组件的属性？或者告诉父组件该关闭窗口了？</p> <p>之前我们讲过一个父子组件的通信，有印象吗？</p> <ul><li>第一步：在父组件中定义一个函数，用来关闭窗口，不过之前已经定义过了。父组件在使用子组件时，绑定事件，关联到这个函数：Brand.vue</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--对话框的内容，表单--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-card-text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>px-5<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span>400px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>brand-form</span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>closeWindow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:oldBrand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oldBrand<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:isEdit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isEdit<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-card-text</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>第二步，子组件通过<code>this.$emit</code>调用父组件的函数：BrandForm.vue</li></ul> <p><img src="assets/1545223341933.png" alt="1545223341933"></p> <p>测试一下，保存成功：</p> <p><img src="assets/1530713222558.png" alt="1530713222558"></p> <p>我们优化一下，关闭的同时重新加载数据：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">closeWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 关闭窗口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 重新加载数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDataFromServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_2-实现图片上传"><a href="#_2-实现图片上传" class="header-anchor">#</a> 2.实现图片上传</h1> <p>刚才的新增实现中，我们并没有上传图片，接下来我们一起完成图片上传逻辑。</p> <p>文件的上传并不只是在品牌管理中有需求，以后的其它服务也可能需要，因此我们创建一个独立的微服务，专门处理各种上传。</p> <h2 id="_2-1-搭建项目"><a href="#_2-1-搭建项目" class="header-anchor">#</a> 2.1.搭建项目</h2> <h3 id="_2-1-1-创建module"><a href="#_2-1-1-创建module" class="header-anchor">#</a> 2.1.1.创建module</h3> <p><img src="assets/1530715294772.png" alt="1530715294772"></p> <p><img src="assets/1530715390747.png" alt="1530715390747"></p> <p><img src="assets/1530715447962.png" alt="1530715447962"></p> <p><img src="assets/1530715487863.png" alt="1530715487863"></p> <h3 id="_2-1-2-依赖"><a href="#_2-1-2-依赖" class="header-anchor">#</a> 2.1.2.依赖</h3> <p>我们需要EurekaClient和web依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>leyou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.leyou.parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.leyou.upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>leyou-upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-1-3-编写配置"><a href="#_2-1-3-编写配置" class="header-anchor">#</a> 2.1.3.编写配置</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8082</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> upload<span class="token punctuation">-</span>service
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">multipart</span><span class="token punctuation">:</span>
      <span class="token key atrule">max-file-size</span><span class="token punctuation">:</span> 5MB <span class="token comment"># 限制文件上传的大小</span>
<span class="token comment"># Eureka</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>10086/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment"># 每隔5秒发送一次心跳</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment"># 10秒不发送就过期</span>
</code></pre></div><p>需要注意的是，我们应该添加了限制文件大小的配置</p> <h3 id="_2-1-4-引导类"><a href="#_2-1-4-引导类" class="header-anchor">#</a> 2.1.4.引导类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeyouUploadApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">LeyouUploadApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结构：</p> <p><img src="assets/1530717442747.png" alt="1530717442747"></p> <h2 id="_2-2-编写上传功能"><a href="#_2-2-编写上传功能" class="header-anchor">#</a> 2.2.编写上传功能</h2> <p>文件上传功能，也是自定义组件完成的，参照自定义组件用法指南：</p> <p><img src="assets/1545223629762.png" alt="1545223629762"></p> <p>在页面中的使用：</p> <p><img src="assets/1545223731347.png" alt="1545223731347"></p> <h3 id="_2-2-1-controller"><a href="#_2-2-1-controller" class="header-anchor">#</a> 2.2.1.controller</h3> <p>编写controller需要知道4个内容：结合用法指南</p> <ul><li>请求方式：上传肯定是POST</li> <li>请求路径：/upload/image</li> <li>请求参数：文件，参数名是file，SpringMVC会封装为一个接口：MultipartFile</li> <li>返回结果：上传成功后得到的文件的url路径，也就是返回String</li></ul> <p>代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;upload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UploadService</span> uploadService<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 图片上传
     * @param file
     * @return
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">uploadImage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadService<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">badRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">CREATED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-2-service"><a href="#_2-2-2-service" class="header-anchor">#</a> 2.2.2.service</h3> <p>在上传文件过程中，我们需要对上传的内容进行校验：</p> <ol><li>校验文件大小</li> <li>校验文件的媒体类型</li> <li>校验文件的内容</li></ol> <p>文件大小在Spring的配置文件中设置，因此已经会被校验，我们不用管。</p> <p>具体代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token constant">CONTENT_TYPES</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image/gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UploadService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 校验文件的类型</span>
        <span class="token class-name">String</span> contentType <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">CONTENT_TYPES</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 文件类型不合法，直接返回null</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;文件类型不合法：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 校验文件的内容</span>
            <span class="token class-name">BufferedImage</span> bufferedImage <span class="token operator">=</span> <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>bufferedImage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;文件内容不合法：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 保存到服务器</span>
            file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\leyou\\images\\&quot;</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 生成url地址，返回</span>
            <span class="token keyword">return</span> <span class="token string">&quot;http://image.leyou.com/&quot;</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;服务器内部错误：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里有一个问题：为什么图片地址需要使用另外的url？</p> <ul><li>图片不能保存在服务器内部，这样会对服务器产生额外的加载负担</li> <li>一般静态资源都应该使用独立域名，这样访问静态资源时不会携带一些不必要的cookie，减小请求的数据量</li></ul> <h3 id="_2-2-3-测试上传"><a href="#_2-2-3-测试上传" class="header-anchor">#</a> 2.2.3.测试上传</h3> <p>我们通过RestClient工具来测试：</p> <p><img src="assets/1530720235186.png" alt="1530720235186"></p> <p>结果：</p> <p><img src="assets/1530720263937.png" alt="1530720263937"></p> <p>去目录下查看：</p> <p><img src="assets/1530720298725.png" alt="1530720298725"></p> <p>上传成功！</p> <h2 id="_2-3-绕过网关"><a href="#_2-3-绕过网关" class="header-anchor">#</a> 2.3.绕过网关</h2> <p>图片上传是文件的传输，如果也经过Zuul网关的代理，文件就会经过多次网路传输，造成不必要的网络负担。在高并发时，可能导致网络阻塞，Zuul网关不可用。这样我们的整个系统就瘫痪了。</p> <p>所以，我们上传文件的请求就不经过网关来处理了。</p> <h3 id="_2-3-1-zuul的路由过滤"><a href="#_2-3-1-zuul的路由过滤" class="header-anchor">#</a> 2.3.1.Zuul的路由过滤</h3> <p>Zuul中提供了一个ignored-patterns属性，用来忽略不希望路由的URL路径，示例：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">zuul.ignored-patterns</span><span class="token punctuation">:</span> <span class="token value attr-value">/upload/**</span>
</code></pre></div><p>路径过滤会对一切微服务进行判定。</p> <p>Zuul还提供了<code>ignored-services</code>属性，进行服务过滤：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">zuul.ignored-services</span><span class="token punctuation">:</span> <span class="token value attr-value">upload-servie</span>
</code></pre></div><p>我们这里采用忽略服务：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">ignored-services</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> upload<span class="token punctuation">-</span>service <span class="token comment"># 忽略upload-service服务</span>
</code></pre></div><p>上面的配置采用了集合语法，代表可以配置多个。</p> <h3 id="_2-3-2-nginx的rewrite指令"><a href="#_2-3-2-nginx的rewrite指令" class="header-anchor">#</a> 2.3.2.Nginx的rewrite指令</h3> <p>现在，我们修改页面的访问路径：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-upload</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand.image<span class="token punctuation">&quot;</span></span> 
      <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/upload/image<span class="token punctuation">&quot;</span></span> 
      <span class="token attr-name">:multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> 
      <span class="token attr-name">:pic-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>250<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:pic-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>90<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>查看页面的请求路径：</p> <p><img src="assets/1530722029884.png" alt="1530722029884"></p> <p>可以看到这个地址不对，依然是去找Zuul网关，因为我们的系统全局配置了URL地址。怎么办？</p> <p>有同学会想：修改页面请求地址不就好了。</p> <p>注意：原则上，我们是不能把除了网关以外的服务对外暴露的，不安全。</p> <p>既然不能修改页面请求，那么就只能在Nginx反向代理上做文章了。</p> <p>我们修改nginx配置，将以/api/upload开头的请求拦截下来，转交到真实的服务地址:</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /api/upload</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8082</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样写大家觉得对不对呢？</p> <p>显然是不对的，因为ip和端口虽然对了，但是路径没变，依然是：http://127.0.0.1:8002/api/upload/image</p> <p>前面多了一个/api</p> <p>Nginx提供了rewrite指令，用于对地址进行重写，语法规则：</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">rewrite</span> <span class="token string">&quot;用来匹配路径的正则&quot;</span> 重写后的路径 [指令]</span><span class="token punctuation">;</span>
</code></pre></div><p>我们的案例：</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>	<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  api.leyou.com</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Server <span class="token variable">$host</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>

    	<span class="token comment"># 上传路径的映射</span>
		<span class="token directive"><span class="token keyword">location</span> /api/upload</span> <span class="token punctuation">{</span>	
			<span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8082</span><span class="token punctuation">;</span>
			<span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
			<span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
			
			<span class="token directive"><span class="token keyword">rewrite</span> <span class="token string">&quot;^/api/(.*)$&quot;</span> /<span class="token variable">$1</span> break</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
		
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
			<span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:10010</span><span class="token punctuation">;</span>
			<span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
			<span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">600</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>首先，我们映射路径是/api/upload，而下面一个映射路径是 / ，根据最长路径匹配原则，/api/upload优先级更高。也就是说，凡是以/api/upload开头的路径，都会被第一个配置处理</p></li> <li><p><code>proxy_pass</code>：反向代理，这次我们代理到8082端口，也就是upload-service服务</p></li> <li><p><code>rewrite &quot;^/api/(.*)$&quot; /$1 break</code>，路径重写：</p> <ul><li><p><code>&quot;^/api/(.*)$&quot;</code>：匹配路径的正则表达式，用了分组语法，把<code>/api/</code>以后的所有部分当做1组</p></li> <li><p><code>/$1</code>：重写的目标路径，这里用$1引用前面正则表达式匹配到的分组（组编号从1开始），即<code>/api/</code>后面的所有。这样新的路径就是除去<code>/api/</code>以外的所有，就达到了去除<code>/api</code>前缀的目的</p></li> <li><p><code>break</code>：指令，常用的有2个，分别是：last、break</p> <ul><li>last：重写路径结束后，将得到的路径重新进行一次路径匹配</li> <li>break：重写路径结束后，不再重新匹配路径。</li></ul> <p>我们这里不能选择last，否则以新的路径/upload/image来匹配，就不会被正确的匹配到8082端口了</p></li></ul></li></ul> <p>修改完成，输入<code>nginx -s reload</code>命令重新加载配置。然后再次上传试试。</p> <h2 id="_2-4-跨域问题"><a href="#_2-4-跨域问题" class="header-anchor">#</a> 2.4.跨域问题</h2> <p>重启nginx，再次上传，发现跟上次的状态码已经不一样了，但是依然报错：</p> <p><img src="assets/1530722280952.png" alt="1526200471676"></p> <p>不过庆幸的是，这个错误已经不是第一次见了，跨域问题。</p> <p>我们在upload-service中添加一个CorsFilter即可：</p> <p><img src="assets/1530722617437.png" alt="1530722617437"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeyouCorsConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.添加CORS配置信息</span>
        <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1) 允许的域,不要写*，否则cookie就无法使用了</span>
        config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">&quot;http://manage.leyou.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3) 允许的请求方式</span>
        config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4）允许的头信息</span>
        config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.添加映射路径，我们拦截一切请求</span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> configSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configSource<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.返回新的CorsFilter.</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>configSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再次测试：</p> <p><img src="assets/1530722674897.png" alt="1530722674897"></p> <p>不过，非常遗憾的是，访问图片地址，却没有响应。</p> <p><img src="assets/1530722728379.png" alt="1530722728379"></p> <p>这是因为我们并没有任何服务器对应image.leyou.com这个域名。。</p> <p>这个问题，我们暂时放下，回头再来解决。</p> <h2 id="_2-5-文件上传的缺陷"><a href="#_2-5-文件上传的缺陷" class="header-anchor">#</a> 2.5.文件上传的缺陷</h2> <p>先思考一下，现在上传的功能，有没有什么问题？</p> <p>上传本身没有任何问题，问题出在保存文件的方式，我们是保存在服务器机器，就会有下面的问题：</p> <ul><li>单机器存储，存储能力有限</li> <li>无法进行水平扩展，因为多台机器的文件无法共享,会出现访问不到的情况</li> <li>数据没有备份，有单点故障风险</li> <li>并发能力差</li></ul> <p>这个时候，最好使用分布式文件存储来代替本地文件存储。</p> <h1 id="_3-fastdfs"><a href="#_3-fastdfs" class="header-anchor">#</a> 3.FastDFS</h1> <h2 id="_3-1-什么是分布式文件系统"><a href="#_3-1-什么是分布式文件系统" class="header-anchor">#</a> 3.1.什么是分布式文件系统</h2> <p>分布式文件系统（Distributed File System）是指文件系统管理的物理存储资源不一定直接连接在本地节点上，而是通过计算机网络与节点相连。</p> <p>通俗来讲：</p> <ul><li>传统文件系统管理的文件就存储在本机。</li> <li>分布式文件系统管理的文件存储在很多机器，这些机器通过网络连接，要被统一管理。无论是上传或者访问文件，都需要通过管理中心来访问</li></ul> <h2 id="_3-2-什么是fastdfs"><a href="#_3-2-什么是fastdfs" class="header-anchor">#</a> 3.2.什么是FastDFS</h2> <p>FastDFS是由淘宝的余庆先生所开发的一个轻量级、高性能的开源分布式文件系统。用纯C语言开发，功能丰富：</p> <ul><li>文件存储</li> <li>文件同步</li> <li>文件访问（上传、下载）</li> <li>存取负载均衡</li> <li>在线扩容</li></ul> <p>适合有大容量存储需求的应用或系统。同类的分布式文件系统有谷歌的GFS、HDFS（Hadoop）、TFS（淘宝）等。</p> <h2 id="_3-3-fastdfs的架构"><a href="#_3-3-fastdfs的架构" class="header-anchor">#</a> 3.3.FastDFS的架构</h2> <h3 id="_3-3-1-架构图"><a href="#_3-3-1-架构图" class="header-anchor">#</a> 3.3.1.架构图</h3> <p>先上图：</p> <p><img src="assets/1526205318630.png" alt="1526205318630"></p> <p>FastDFS两个主要的角色：Tracker Server 和 Storage Server 。</p> <ul><li>Tracker Server：跟踪服务器，主要负责调度storage节点与client通信，在访问上起负载均衡的作用，和记录storage节点的运行状态，是连接client和storage节点的枢纽。</li> <li>Storage Server：存储服务器，保存文件和文件的meta data（元数据），每个storage server会启动一个单独的线程主动向Tracker cluster中每个tracker server报告其状态信息，包括磁盘使用情况，文件同步情况及文件上传下载次数统计等信息</li> <li>Group：文件组，多台Storage Server的集群。上传一个文件到同组内的一台机器上后，FastDFS会将该文件即时同步到同组内的其它所有机器上，起到备份的作用。不同组的服务器，保存的数据不同，而且相互独立，不进行通信。</li> <li>Tracker Cluster：跟踪服务器的集群，有一组Tracker Server（跟踪服务器）组成。</li> <li>Storage Cluster ：存储集群，有多个Group组成。</li></ul> <h3 id="_3-3-2-上传和下载流程"><a href="#_3-3-2-上传和下载流程" class="header-anchor">#</a> 3.3.2.上传和下载流程</h3> <blockquote><p>上传</p></blockquote> <p><img src="assets/1526205664373.png" alt="1526205664373"></p> <ol><li>Client通过Tracker server查找可用的Storage server。</li> <li>Tracker server向Client返回一台可用的Storage server的IP地址和端口号。</li> <li>Client直接通过Tracker server返回的IP地址和端口与其中一台Storage server建立连接并进行文件上传。</li> <li>上传完成，Storage server返回Client一个文件ID，文件上传结束。</li></ol> <blockquote><p>下载</p></blockquote> <p><img src="assets/1526205705687.png" alt="1526205705687"></p> <ol><li>Client通过Tracker server查找要下载文件所在的的Storage server。</li> <li>Tracker server向Client返回包含指定文件的某个Storage server的IP地址和端口号。</li> <li>Client直接通过Tracker server返回的IP地址和端口与其中一台Storage server建立连接并指定要下载文件。</li> <li>下载文件成功。</li></ol> <h2 id="_3-4-安装和使用"><a href="#_3-4-安装和使用" class="header-anchor">#</a> 3.4.安装和使用</h2> <p>参考课前资料的：</p> <p><img src="assets/1528196441781.png" alt="1528196441781"></p> <h2 id="_3-5-java客户端"><a href="#_3-5-java客户端" class="header-anchor">#</a> 3.5.java客户端</h2> <p>余庆先生提供了一个Java客户端，但是作为一个C程序员，写的java代码可想而知。而且已经很久不维护了。</p> <p>这里推荐一个开源的FastDFS客户端，支持最新的SpringBoot2.0。</p> <p>配置使用极为简单，支持连接池，支持自动生成缩略图，狂拽酷炫吊炸天啊，有木有。</p> <p>地址：<a href="https://github.com/tobato/FastDFS_Client" target="_blank" rel="noopener noreferrer">tobato/FastDFS_client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="assets/1526206304954.png" alt="1526206304954"></p> <p>接下来，我们就用FastDFS改造<strong>leyou-upload</strong>工程。</p> <h3 id="_3-5-1-引入依赖"><a href="#_3-5-1-引入依赖" class="header-anchor">#</a> 3.5.1.引入依赖</h3> <p>在父工程中，我们已经管理了依赖，版本为：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fastDFS.client.version</span><span class="token punctuation">&gt;</span></span>1.26.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fastDFS.client.version</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>因此，这里我们直接在taotao-upload工程的pom.xml中引入坐标即可：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.tobato<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastdfs-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3-5-2-引入配置类"><a href="#_3-5-2-引入配置类" class="header-anchor">#</a> 3.5.2.引入配置类</h3> <p><img src="assets/1528206263148.png" alt="1528206263148"></p> <p>纯java配置：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">FdfsClientConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">// 解决jmx重复注册bean的问题</span>
<span class="token annotation punctuation">@EnableMBeanExport</span><span class="token punctuation">(</span>registration <span class="token operator">=</span> <span class="token class-name">RegistrationPolicy</span><span class="token punctuation">.</span><span class="token constant">IGNORE_EXISTING</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FastClientImporter</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-5-3-编写fastdfs属性"><a href="#_3-5-3-编写fastdfs属性" class="header-anchor">#</a> 3.5.3.编写FastDFS属性</h3> <p>在application.yml配置文件中追加如下内容：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">fdfs</span><span class="token punctuation">:</span>
  <span class="token key atrule">so-timeout</span><span class="token punctuation">:</span> <span class="token number">1501</span> <span class="token comment"># 超时时间</span>
  <span class="token key atrule">connect-timeout</span><span class="token punctuation">:</span> <span class="token number">601</span> <span class="token comment"># 连接超时时间</span>
  <span class="token key atrule">thumb-image</span><span class="token punctuation">:</span> <span class="token comment"># 缩略图</span>
    <span class="token key atrule">width</span><span class="token punctuation">:</span> <span class="token number">60</span>
    <span class="token key atrule">height</span><span class="token punctuation">:</span> <span class="token number">60</span>
  <span class="token key atrule">tracker-list</span><span class="token punctuation">:</span> <span class="token comment"># tracker地址：你的虚拟机服务器地址+端口（默认是22122）</span>
    <span class="token punctuation">-</span> 192.168.56.101<span class="token punctuation">:</span><span class="token number">22122</span>
</code></pre></div><h3 id="_3-5-4-配置hosts"><a href="#_3-5-4-配置hosts" class="header-anchor">#</a> 3.5.4.配置hosts</h3> <p>将来通过域名：image.leyou.com这个域名访问fastDFS服务器上的图片资源。所以，需要代理到虚拟机地址：</p> <p>配置hosts文件，使image.leyou.com可以访问fastDFS服务器</p> <p><img src="assets/1543400932873.png" alt="1543400932873"></p> <h3 id="_3-5-5-测试"><a href="#_3-5-5-测试" class="header-anchor">#</a> 3.5.5.测试</h3> <p>创建测试类：</p> <p><img src="assets/1528207829275.png" alt="1528207829275"></p> <p>把以下内容copy进去：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FastDFSTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FastFileStorageClient</span> storageClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ThumbImageConfig</span> thumbImageConfig<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 要上传的文件</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\joedy\\Pictures\\xbx1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 上传并保存图片，参数：1-上传的文件流 2-文件的大小 3-文件的后缀 4-可以不管他</span>
        <span class="token class-name">StorePath</span> storePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storageClient<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 带分组的路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>storePath<span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 不带分组的路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>storePath<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUploadAndCreateThumb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\joedy\\Pictures\\xbx1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 上传并且生成缩略图</span>
        <span class="token class-name">StorePath</span> storePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storageClient<span class="token punctuation">.</span><span class="token function">uploadImageAndCrtThumbImage</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 带分组的路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>storePath<span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 不带分组的路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>storePath<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取缩略图路径</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> thumbImageConfig<span class="token punctuation">.</span><span class="token function">getThumbImagePath</span><span class="token punctuation">(</span>storePath<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>group1/M00/00/00/wKg4ZVsWl5eAdLNZAABAhya2V0c424.jpg
M00/00/00/wKg4ZVsWl5eAdLNZAABAhya2V0c424.jpg
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>group1/M00/00/00/wKg4ZVsWmD-ARnWiAABAhya2V0c772.png
M00/00/00/wKg4ZVsWmD-ARnWiAABAhya2V0c772.png
M00/00/00/wKg4ZVsWmD-ARnWiAABAhya2V0c772_60x60.png
</code></pre></div><p>访问第二组第一个路径：</p> <p><img src="assets/1532920403019.png" alt="1532920403019"></p> <p>访问最后一个路径（缩略图路径），<strong>注意加组名（group1）</strong>：</p> <p><img src="assets/1532920492769.png" alt="1532920492769"></p> <h3 id="_3-5-6-改造上传逻辑"><a href="#_3-5-6-改造上传逻辑" class="header-anchor">#</a> 3.5.6.改造上传逻辑</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FastFileStorageClient</span> storageClient<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token constant">CONTENT_TYPES</span> <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;image/gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UploadService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 校验文件的类型</span>
        <span class="token class-name">String</span> contentType <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">CONTENT_TYPES</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 文件类型不合法，直接返回null</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;文件类型不合法：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 校验文件的内容</span>
            <span class="token class-name">BufferedImage</span> bufferedImage <span class="token operator">=</span> <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>bufferedImage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;文件内容不合法：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 保存到服务器</span>
            <span class="token comment">// file.transferTo(new File(&quot;C:\\leyou\\images\\&quot; + originalFilename));</span>
            <span class="token class-name">String</span> ext <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">substringAfterLast</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">StorePath</span> storePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storageClient<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ext<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 生成url地址，返回</span>
            <span class="token keyword">return</span> <span class="token string">&quot;http://image.leyou.com/&quot;</span> <span class="token operator">+</span> storePath<span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;服务器内部错误：{}&quot;</span><span class="token punctuation">,</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只需要把原来保存文件的逻辑去掉，然后上传到FastDFS即可。</p> <h3 id="_3-5-7-测试"><a href="#_3-5-7-测试" class="header-anchor">#</a> 3.5.7.测试</h3> <p>通过RestClient测试：</p> <p><img src="assets/1528208647458.png" alt="1528208647458"></p> <p><img src="assets/1528208592430.png" alt="1528208592430"></p> <h2 id="_3-6-页面测试上传"><a href="#_3-6-页面测试上传" class="header-anchor">#</a> 3.6.页面测试上传</h2> <p>发现上传成功：</p> <p><img src="assets/1528210076570.png" alt="1528210076570"></p> <p><img src="assets/1528210349042.png" alt="1528210349042"></p> <h1 id="_4-修改品牌-作业"><a href="#_4-修改品牌-作业" class="header-anchor">#</a> 4.修改品牌（作业）</h1> <p>修改的难点在于回显。</p> <p>当我们点击编辑按钮，希望弹出窗口的同时，看到原来的数据：</p> <p><img src="assets/1532923048027.png" alt="1532923048027"></p> <h2 id="_4-1-点击编辑出现弹窗"><a href="#_4-1-点击编辑出现弹窗" class="header-anchor">#</a> 4.1.点击编辑出现弹窗</h2> <p>这个比较简单，修改show属性为true即可实现，我们绑定一个点击事件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-icon</span> <span class="token attr-name">small</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mr-2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editItem(props.item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    edit
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-icon</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后编写事件，改变show 的状态：</p> <p><img src="assets/1528210800331.png" alt="1528210800331"></p> <p>如果仅仅是这样，编辑按钮与新增按钮将没有任何区别，关键在于，如何回显呢？</p> <h2 id="_4-2-回显数据"><a href="#_4-2-回显数据" class="header-anchor">#</a> 4.2.回显数据</h2> <p>回显数据，就是把当前点击的品牌数据传递到子组件（MyBrandForm）。而父组件给子组件传递数据，通过props属性。</p> <ul><li><p>第一步：在编辑时获取当前选中的品牌信息，并且记录到data中</p> <p>先在data中定义属性，用来接收用来编辑的brand数据：</p> <p><img src="assets/1528210594296.png" alt="1528210594296"></p> <p>我们在页面触发编辑事件时，把当前的brand传递给editBrand方法：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-btn</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editBrand(props.item)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-btn</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后在editBrand中接收数据，赋值给oldBrand：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">editItem</span><span class="token punctuation">(</span><span class="token parameter">oldBrand</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 使编辑窗口可见</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化编辑的数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>oldBrand <span class="token operator">=</span> oldBrand<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>第二步：把获取的brand数据 传递给子组件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--对话框内容--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-card-text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>px-5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--这是一个表单--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-brand-form</span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:oldBrand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oldBrand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-brand-form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-card-text</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>第三步：在子组件（MyBrandForm.vue）中通过props接收要编辑的brand数据，Vue会自动完成回显</p> <p>接收数据：</p> <p><img src="assets/1528211066645.png" alt="1528211066645"></p> <p>通过watch函数监控oldBrand的变化，把值copy到本地的brand：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">oldBrand</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// 监控oldBrand的变化</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// 注意不要直接赋值，否则这边的修改会影响到父组件的数据，copy属性即可</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span>  Object<span class="token punctuation">.</span><span class="token function">deepCopy</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">// 为空，初始化brand</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">letter</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">categories</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Object.deepCopy 自定义的对象进行深度复制的方法。</li> <li>需要判断监听到的是否为空，如果为空，应该进行初始化</li></ul></li></ul> <p>测试：发现数据回显了，除了商品分类以外：</p> <p><img src="assets/1528211235872.png" alt="1528211235872"></p> <h2 id="_4-3-商品分类回显"><a href="#_4-3-商品分类回显" class="header-anchor">#</a> 4.3.商品分类回显</h2> <p>为什么商品分类没有回显？</p> <p>因为品牌中并没有商品分类数据。我们需要在进入编辑页面之前，查询商品分类信息：</p> <h3 id="_4-3-1-后台提供接口"><a href="#_4-3-1-后台提供接口" class="header-anchor">#</a> 4.3.1.后台提供接口</h3> <blockquote><h4 id="controller"><a href="#controller" class="header-anchor">#</a> controller</h4></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 通过品牌id查询商品分类
     * @param bid
     * @return
     */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;bid/{bid}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryByBrandId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;bid&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> bid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>categoryService<span class="token punctuation">.</span><span class="token function">queryByBrandId</span><span class="token punctuation">(</span>bid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Service</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryByBrandId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> bid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>categoryMapper<span class="token punctuation">.</span><span class="token function">queryByBrandId</span><span class="token punctuation">(</span>bid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>mapper</p></blockquote> <p>因为需要通过中间表进行子查询，所以这里要手写Sql：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 根据品牌id查询商品分类
     * @param bid
     * @return
     */</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM tb_category WHERE id IN (SELECT category_id FROM tb_category_brand WHERE brand_id = #{bid})&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryByBrandId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> bid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-3-2-前台查询分类并渲染"><a href="#_4-3-2-前台查询分类并渲染" class="header-anchor">#</a> 4.3.2.前台查询分类并渲染</h3> <p>我们在编辑页面打开之前，先把数据查询完毕：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">editBrand</span><span class="token punctuation">(</span><span class="token parameter">oldBrand</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 根据品牌信息查询商品分类</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/item/category/bid/&quot;</span> <span class="token operator">+</span> oldBrand<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 控制弹窗可见：</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取要编辑的brand</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>oldBrand <span class="token operator">=</span> oldBrand
        <span class="token comment">// 回显商品分类</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>oldBrand<span class="token punctuation">.</span>categories <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再次测试：数据成功回显了</p> <p><img src="assets/1526222999115.png" alt="1526222999115"></p> <h3 id="_4-3-3-新增窗口数据干扰"><a href="#_4-3-3-新增窗口数据干扰" class="header-anchor">#</a> 4.3.3.新增窗口数据干扰</h3> <p>但是，此时却产生了新问题：新增窗口竟然也有数据？</p> <p>原因：</p> <div class="language- extra-class"><pre><code>如果之前打开过编辑，那么在父组件中记录的oldBrand会保留。下次再打开窗口，如果是编辑窗口到没问题，但是新增的话，就会再次显示上次打开的品牌信息了。
</code></pre></div><p>解决：</p> <div class="language- extra-class"><pre><code>新增窗口打开前，把数据置空。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addBrand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 控制弹窗可见：</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dialog <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 把oldBrand变为null</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>oldBrand <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-3-4-提交表单时判断是新增还是修改"><a href="#_4-3-4-提交表单时判断是新增还是修改" class="header-anchor">#</a> 4.3.4.提交表单时判断是新增还是修改</h3> <p>新增和修改是同一个页面，我们该如何判断？</p> <p>父组件中点击按钮弹出新增或修改的窗口，因此父组件非常清楚接下来是新增还是修改。</p> <p>因此，最简单的方案就是，在父组件中定义变量，记录新增或修改状态，当弹出页面时，把这个状态也传递给子组件。</p> <p>第一步：在父组件中记录状态：</p> <p><img src="assets/1526224372366.png" alt="1526224372366"></p> <p>第二步：在新增和修改前，更改状态：</p> <p><img src="assets/1526224447288.png" alt="1526224447288"></p> <p>第三步：传递给子组件</p> <p><img src="assets/1526224495244.png" alt="1526224495244"></p> <p>第四步，子组件接收标记：</p> <p><img src="assets/1526224563838.png" alt="1526224563838"></p> <p>标题的动态化：</p> <p><img src="assets/1526224628514.png" alt="1526224628514"></p> <p>表单提交动态：</p> <p>axios除了除了get和post外，还有一个通用的请求方式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 将数据提交到后台</span>
<span class="token comment">// this.$http.post('/item/brand', this.$qs.stringify(params))</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">?</span> <span class="token string">'put'</span> <span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token comment">// 动态判断是POST还是PUT</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/item/brand'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 关闭窗口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;保存成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;保存失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="_5-删除-作业"><a href="#_5-删除-作业" class="header-anchor">#</a> 5.删除（作业）</h1></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">10/21/2020, 1:23:11 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/HomeWeb/notes/Java/品牌查询/day07.html" class="prev">
        (4) 品牌查询
      </a></span> <span class="next"><a href="/HomeWeb/notes/Java/规格参数/day09-商品规格管理.html">
        (6) 规格参数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/HomeWeb/assets/js/app.f00e1531.js" defer></script><script src="/HomeWeb/assets/js/3.3632763b.js" defer></script><script src="/HomeWeb/assets/js/22.620201c8.js" defer></script>
  </body>
</html>
